!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var o,r=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=function(){function t(){var t,e;this.menuBtns=document.getElementsByClassName("nav__option__btn"),this.navSubMenus=document.querySelectorAll(".nav__option__dropdown-opts"),this.toggleShowNavBtn=document.querySelector(".nav__toggle__btn"),this.close_menu();try{for(var n=r(this.menuBtns),o=n.next();!o.done;o=n.next()){o.value.addEventListener("click",this.subMenuCtrl)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.nav_toggle_btn()}return t.prototype.close_menu=function(){var t=this;document.addEventListener("click",(function(){for(var e=0;e<t.navSubMenus.length;e++)t.navSubMenus[e].classList.replace("nav__option__dropdown-opts--expanded","nav__option__dropdown-opts--collapse")}));for(var e=document.getElementsByClassName("dropdown-menu__options"),n=function(n){var i=o.menuBtns[n];i.addEventListener("click",(function(){var n,o,s;try{for(var a=(n=void 0,r(e)),u=a.next();!u.done;u=a.next()){u.value.classList.add("dropdown-menu__options--hide")}}catch(t){n={error:t}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}for(var c=0;c<t.menuBtns.length;c++){var l=t.menuBtns[c];l.getAttribute("filter-for")!=i.getAttribute("filter-for")&&(null===(s=l.nextElementSibling)||void 0===s?void 0:s.classList.contains("nav__option__dropdown-opts"))&&l.nextElementSibling.classList.replace("nav__option__dropdown-opts--expanded","nav__option__dropdown-opts--collapse")}}))},o=this,i=0;i<this.menuBtns.length;i++)n(i)},t.prototype.subMenuCtrl=function(t){t.stopPropagation();var e=t.target;HTMLElement;var n,o=e.classList;if(o.contains("nav-sub-products"))n=document.querySelector(".nav__option__dropdown-opts.nav-sub-products");else{if(!o.contains("nav-sub-rooms"))throw"Navigation element does not exist.";n=document.querySelector(".nav__option__dropdown-opts.nav-sub-rooms")}n.classList.contains("nav__option__dropdown-opts--expanded")?(n.classList.add("nav__option__dropdown-opts--collapse"),n.classList.remove("nav__option__dropdown-opts--expanded")):(n.classList.remove("nav__option__dropdown-opts--collapse"),n.classList.add("nav__option__dropdown-opts--expanded"))},t.prototype.nav_toggle_btn=function(){var t,e=[document.getElementsByClassName("nav__option"),document.getElementsByClassName("nav__account-basket")];null===(t=this.toggleShowNavBtn)||void 0===t||t.addEventListener("click",(function(){for(var t=0;t<e.length;t++)for(var n=0;n<e[t].length;n++)e[t][n].classList.toggle("nav-option--show")}))},t}(),s=function(){function t(){this.ddMenus=document.getElementsByClassName("dropdown-menu"),this.close_menu();for(var t=0;t<this.ddMenus.length;t++)this.build_menu(this.ddMenus[t])}return t.prototype.close_menu=function(){var t=document.getElementsByClassName("dropdown-menu__selected"),e=document.getElementsByClassName("dropdown-menu__options");document.addEventListener("click",(function(){for(var t=0;t<e.length;t++)e[t].classList.add("dropdown-menu__options--hide")}));for(var n=document.querySelectorAll(".nav__option__dropdown-opts"),o=function(e){var o=t[e];o.addEventListener("click",(function(){for(var e,r=0;r<n.length;r++)n[r].classList.replace("nav__option__dropdown-opts--expanded","nav__option__dropdown-opts--collapse");for(var i=0;i<t.length;i++){var s=t[i];s.getAttribute("filter-for")!=o.getAttribute("filter-for")&&s.nextElementSibling.classList.contains("dropdown-menu__options")&&(null===(e=s.nextElementSibling)||void 0===e||e.classList.add("dropdown-menu__options--hide"))}}))},r=0;r<t.length;r++)o(r)},t.prototype.build_menu=function(t){var e=t.getElementsByClassName("dropdown-menu__selected")[0],n=t.getElementsByClassName("dropdown-menu__options")[0],o=n.getElementsByClassName("dropdown-menu__options__label");e.addEventListener("click",(function(t){t.stopPropagation(),n.classList.toggle("dropdown-menu__options--hide")}));for(var r=function(t){var r=o[t];r.addEventListener("click",(function(){for(var t=0;t<o.length;t++)o[t].classList.remove("dropdown-menu__options__label--selected");r.classList.add("dropdown-menu__options__label--selected"),e.innerText=r.innerText,n.classList.add("dropdown-menu__options--hide")}))},i=0;i<o.length;i++)r(i)},t}(),a=function(){function t(){}return t.check_if_positive_int=function(t){return"number"==typeof t&&(t>=0&&t===Math.round(t))},t}(),u=function(){function t(){this.containers=document.getElementsByClassName("c-quantity");for(var t=0;t<this.containers.length;t++){var e=this._set_elements(this.containers[t]),n=e[0],o=e[1],r=e[2],i=Number(r.getAttribute("min")),s=Number(r.getAttribute("max"));this._build_minus_button(n,o,r,i,s),this._build_plus_button(n,o,r,i,s),this._build_input_box(n,o,r,i,s)}}return t.prototype._set_elements=function(t){return[t.querySelector('button[control="quantity-down"]'),t.querySelector('button[control="quantity-up"]'),t.querySelector("input.c-quantity__input")]},t.prototype._build_minus_button=function(t,e,n,o,r){t.addEventListener("click",(function(){"disabled"!=t.getAttribute("disabled")&&(n.value=String(Number(n.value)-1),Number(n.value)<r&&e.removeAttribute("disabled"),Number(n.value)===o&&t.setAttribute("disabled","disabled"))}))},t.prototype._build_plus_button=function(t,e,n,o,r){e.addEventListener("click",(function(){"disabled"!=e.getAttribute("disabled")&&(n.value=String(Number(n.value)+1),Number(n.value)>o&&t.removeAttribute("disabled"),Number(n.value)===r&&e.setAttribute("disabled","disabled"))}))},t.prototype._build_input_box=function(t,e,n,o,r){n.addEventListener("focusout",(function(){var i=Number(n.value);a.check_if_positive_int(i)?(t.removeAttribute("disabled"),e.removeAttribute("disabled"),n.parentElement.removeAttribute("invalid"),i<=o?t.setAttribute("disabled","disabled"):t.removeAttribute("disabled"),i>=r?e.setAttribute("disabled","disabled"):e.removeAttribute("disabled")):(t.setAttribute("disabled","disabled"),e.setAttribute("disabled","disabled"),n.parentElement.setAttribute("invalid","true"))}))},t}(),c=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l=function(){function t(){this._expand_nav_search()}return t.prototype._expand_nav_search=function(){var t,e,n=this,o=document.getElementsByClassName("nav__search")[0];try{for(var r=c(["f-minPrice","f-maxPrice","f-category","f-colour"]),i=r.next();!i.done;i=r.next()){var s=i.value,a=document.createElement("INPUT");a.setAttribute("type","hidden"),a.setAttribute("name",s),a.setAttribute("id",s),o.appendChild(a)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}for(var u=document.getElementsByClassName("dropdown-menu__options"),l=function(t){var e,o=u[t];switch(o.getAttribute("filter-for")){case"min-price":e=document.getElementById("f-minPrice");break;case"max-price":e=document.getElementById("f-maxPrice");break;case"category":e=document.getElementById("f-category");break;case"colour":e=document.getElementById("f-colour")}e&&o.addEventListener("click",(function(t){t.stopPropagation(),e.value=o.previousElementSibling.textContent;var r=n._API_path(),i=new XMLHttpRequest;i.open("GET",r),i.send(),i.onreadystatechange=function(){if(4==i.readyState&&200==i.status){var t=JSON.parse(i.responseText);n._filter_results(t)}}}))},d=0;d<u.length;d++)l(d)},t.prototype._API_path=function(){var t=window.location.href.replace("/search/","/search-results/"),e=document.getElementById("f-minPrice"),n=document.getElementById("f-maxPrice"),o=document.getElementById("f-category"),r=document.getElementById("f-colour");if(e.value){var i="f-minPrice="+e.value;t=t.match(/f-minPrice=.*?&/)?t.replace(/f-minPrice=.*?&/,i+"&"):t.concat("&",i)}if(n.value){i="f-maxPrice="+n.value;t=t.match(/f-maxPrice=.*?&/)?t.replace(/f-maxPrice=.*?&/,i+"&"):t.concat("&",i)}if(o.value){i="f-category="+o.value;t=t.match(/f-category=.*?&/)?t.replace(/f-category=.*?&/,i+"&"):t.concat("&",i)}if(r.value){i="f-colour="+r.value;t=t.match(/f-colour=.*?&/)?t.replace(/f-colour=.*?&/,i+"&"):t.concat("&",i)}return t},t.prototype._filter_results=function(t){var e=document.getElementsByClassName("results__result"),n=[];for(var o in JSON,t)n.push(t[o].product_id);for(var r=0;r<e.length;r++)n.includes(Number(e[r].getAttribute("ID")))?e[r].classList.remove("hide"):e[r].classList.add("hide")},t}(),d=function(){function t(){this.passwordElem=document.getElementById("account-password"),this.confirmPassElem=document.getElementById("account-password-confirm"),this.submitBtn=document.getElementById("account-submit"),this.errorMsgElem=document.getElementById("account-errors"),this.set_keybinders()}return t.prototype.check_passwords=function(){var t,e,n=null===(t=this.passwordElem)||void 0===t?void 0:t.value,o=null===(e=this.confirmPassElem)||void 0===e?void 0:e.value;return!n||!o||(n===o?!!(n.length>=6&&n.match(/[0-9]/)&&n.match(/[A-z]/))||(this.errorMsgElem.textContent="Password must be at least 6 characters long and contain at least 1 number.",!1):(this.errorMsgElem.textContent="Passwords do not match.",!1))},t.prototype.set_keybinders=function(){var t=this;this.confirmPassElem.addEventListener("focusout",(function(){t.update_element_attrs()}))},t.prototype.update_element_attrs=function(){this.check_passwords()?(this.passwordElem.removeAttribute("invalid"),this.confirmPassElem.removeAttribute("invalid"),this.submitBtn.removeAttribute("disabled")):(this.passwordElem.setAttribute("invalid","true"),this.confirmPassElem.setAttribute("invalid","true"),this.submitBtn.setAttribute("disabled","disabled"))},t}(),m=function(){function t(){this.container=document.getElementById("pagination"),this.container&&this.build_links()}return t.prototype.build_links=function(){for(var t=this.container.getElementsByClassName("pagination__link"),e=window.location.href.replace(/&((.*?&$)|(page=[0-9]{1,})|(page=))/g,"")+"&page=",n=0;n<t.length;n++)"disabled"!=t[n].getAttribute("disabled")&&t[n].setAttribute("href",e+t[n].getAttribute("page"))},t}(),p=function(){function t(){this.containers=document.getElementsByClassName("carousel-container__main");for(var t=0;t<this.containers.length;t++){var e=this.containers[t].getElementsByClassName("carousel-container__display-section")[t].getElementsByClassName("carousel-container__display-section__img");if(e.length>1){var n=this.containers[t].getElementsByClassName("carousel-container__display-controls")[0].getElementsByClassName("carousel-container__display-controls__control");this.on_clicking_thumbs(e,n),this.on_clicking_display_img(e)}this.update_total_thumbs(this.containers[t].getElementsByClassName("carousel-container__display-controls__control"))}}return t.prototype.on_clicking_thumbs=function(t,e){for(var n=function(n){e[n].addEventListener("click",(function(){for(var o=e[n].getAttribute("for"),r=0;r<t.length;r++)t[r].getAttribute("img")===o?"init"!=t[r].getAttribute("position")&&t[r].setAttribute("position","show"):t[r].setAttribute("position","hide")}))},o=0;o<e.length;o++)n(o)},t.prototype.on_clicking_display_img=function(t){for(var e=function(e){t[e].addEventListener("click",(function(){t[e].setAttribute("position","hide"),e===t.length-2?t[0].setAttribute("position","show"):t[e+1].setAttribute("position","show")}))},n=0;n<t.length;n++)e(n)},t.prototype.update_total_thumbs=function(t){for(var e=t.length,n=0;n<e;n++)t[n].setAttribute("totalthumbs",e.toString());t[0].parentElement.setAttribute("totalthumbs",e.toString()),t[0].parentElement.previousElementSibling.setAttribute("totalthumbs",e.toString()),t[0].parentElement.parentElement.setAttribute("totalthumbs",e.toString()),t[0].parentElement.parentElement.parentElement.setAttribute("totalthumbs",e.toString()),t[0].parentElement.parentElement.parentElement.parentElement.setAttribute("totalthumbs",e.toString())},t}(),_=function(){function t(){if(this.containers=document.querySelectorAll('.rating__stars[selectable="true"]'),this.selectedClass="i-star--checked",this.userRating=0,this.containers.length){this.userRating=Number(document.querySelector("#product-reviews-user-rating").getAttribute("userRating"));for(var t=0;t<this.containers.length;t++){var e=[this.containers[t].querySelector('.i-star[value="1"]'),this.containers[t].querySelector('.i-star[value="2"]'),this.containers[t].querySelector('.i-star[value="3"]'),this.containers[t].querySelector('.i-star[value="4"]'),this.containers[t].querySelector('.i-star[value="5"]')];this.update_selection(e),this.build_star_functions(e)}}}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.update_selection=function(t){this.remove_all_stars(t);var e=this.user_rating;e>=1&&t[0].classList.add(this.selectedClass),e>=2&&t[1].classList.add(this.selectedClass),e>=3&&t[2].classList.add(this.selectedClass),e>=4&&t[3].classList.add(this.selectedClass),5==e&&t[4].classList.add(this.selectedClass);var n=document.getElementById("user-review-rating");n&&(n.value=e.toString())},t.prototype.remove_all_stars=function(t){for(var e=0;e<t.length;e++)t[e].classList.remove(this.selectedClass),t[e].removeAttribute("highlight")},Object.defineProperty(t.prototype,"user_rating",{get:function(){return this.userRating},set:function(t){this.userRating=t},enumerable:!0,configurable:!0}),t.prototype.build_star_functions=function(t){for(var e=this,n=function(n){t[n].addEventListener("mouseover",(function(){e.remove_all_stars(t);for(var o=0;o<=n;o++)t[o].setAttribute("highlight","true")})),t[n].addEventListener("mouseout",(function(){e.update_selection(t)})),t[n].addEventListener("click",(function(){e.user_rating=n+1,e.update_selection(t)}))},o=0;o<t.length;o++)n(o)},t}(),h=function(){function t(){this.reviewBtns=document.querySelectorAll("[newReviewProduct]"),this.newReviewCont=document.getElementById("nev-review-pop-up"),this.productIdInput=this.newReviewCont.querySelector("#new-review-product-id"),this.storeIdInput=this.newReviewCont.querySelector("#new-review-store-id");for(var t=0;t<this.reviewBtns.length;t++)this.setup_btn_keybinder(this.reviewBtns[t]);this.close_pop_up()}return t.prototype.setup_btn_keybinder=function(t){var e=this;t.addEventListener("click",(function(n){n.stopPropagation(),e.newReviewCont.classList.remove("hide"),e.productIdInput.value=t.getAttribute("newReviewProduct"),e.storeIdInput.value=t.getAttribute("newReviewStore")}))},t.prototype.close_pop_up=function(){var t,e=this;this.newReviewCont.querySelector('.new-review__btn[for="cancel"]').addEventListener("click",(function(){e.newReviewCont.classList.add("hide"),e.productIdInput.value=""})),document.body.addEventListener("click",(function(){e.newReviewCont.classList.add("hide")})),null===(t=this.newReviewCont.querySelector(".new-review__form"))||void 0===t||t.addEventListener("click",(function(t){t.stopPropagation()}))},t}(),f=function(){function t(){this.totalItems=window.localStorage.getItem("totalBasketSize"),this.items=window.localStorage.getItem("basketItems"),this.update_basket_counter(this.totalItems)}return t.prototype._read_items=function(){this.totalItems?Number(this.totalItems):this.totalItems=0,this.items?this.items=JSON.parse(this.items):this.items={}},t.prototype._set_items=function(){this.totalItems?window.localStorage.setItem("totalBasketSize",this.totalItems.toString()):window.localStorage.setItem("totalBasketSize","0"),this.items?(this.items=JSON.stringify(this.items),window.localStorage.setItem("basketItems",this.items)):window.localStorage.setItem("basketItems","{}"),this.update_basket_counter(this.totalItems)},t.prototype.add_item=function(t,e){this._read_items(),this.totalItems=Number(this.totalItems),this.totalItems+=e,this.items[t]?this.items[t]+=e:this.items[t]=e,this._set_items()},t.prototype.remove_item=function(t,e){this._read_items(),this.totalItems=Number(this.totalItems),this.totalItems>0&&(this.totalItems-=e),this.update_basket_counter(this.totalItems),this.items[t]&&(this.items[t]=Number(this.items[t]),this.items[t]-=e,0==this.items[t]&&delete this.items[t]),this._set_items()},t.prototype.remove_entire_item=function(t){this._read_items(),this.totalItems=Number(this.totalItems)-Number(this.items[t]),delete this.items[t],this._set_items()},t.prototype.update_basket_counter=function(t){var e=document.getElementById("basket-total-items");t?(e.classList.remove("hide"),e.textContent=t.toString()):e.classList.add("hide")},t.prototype.update_single_item=function(t,e){this._read_items();var n=Number(this.items[t]);this.items[t]=e,this.totalItems=Number(this.totalItems)+e-n,this._set_items()},t}(),v=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),b=function(t){function e(){var e=t.call(this)||this,n=window.location.href.replace("/products/","/products/info-api/"),o=new XMLHttpRequest;return o.open("GET",n),o.send(),o.onreadystatechange=function(){if(4==o.readyState&&200==o.status){var t=JSON.parse(o.responseText);t.colours&&e.build_colours(t.colours),t.sets&&e.build_product_sets(t.sets),t.similar&&e.build_similar_products(t.similar),t.features&&e.build_features(t.features)}},e.add_to_basket(),e}return v(e,t),e.prototype.build_colours=function(t){var e=document.getElementById("product-colour-variations");if(e)for(var n=0;n<t.length;n++){var o="/products/"+t[n].product_id,r=t[n].col_name,i=t[n].col_hex_val,s=document.createElement("A");s.setAttribute("href",o),s.setAttribute("class","dropdown-menu__options__label");var a=document.createElement("LABEL");a.setAttribute("for","colour-"+r);var u=document.createElement("SPAN");u.setAttribute("class","sm-colour-box"),u.setAttribute("style","background-color: "+i+";");var c=document.createElement("INPUT");c.setAttribute("type","radio"),c.setAttribute("class","dropdown-menu__options__radio-btn"),c.setAttribute("name","prod-f-colour"),c.setAttribute("id","colour-"+r),c.setAttribute("value","colour-"+r),a.appendChild(u),a.append(r),s.appendChild(a),e.appendChild(s),e.appendChild(c)}else console.warn("#product-colour-variations does not exist, alternative colours cannot be added.")},e.prototype.build_product_sets=function(t){var e=document.getElementById("product-sets");if(e)if(t.length)for(var n=0;n<t.length;n++){var o="/products/"+t[n].product_id,r=t[n].name,i=t[n].showcase_image,s=t[n].price,a=document.createElement("A");a.setAttribute("class","product-set related-product"),a.setAttribute("href",o);var u=document.createElement("IMG");u.setAttribute("class","product-set__img related-product__img"),u.setAttribute("src",i),u.setAttribute("alt","Image of a product of which this product is a set. ("+r+"}");var c=document.createElement("SPAN");c.setAttribute("class","product-set__name related-product__name"),c.textContent=r;var l=document.createElement("SPAN");l.setAttribute("class","product-set__price related-product__price"),l.textContent="£"+s,a.appendChild(u),a.appendChild(c),a.appendChild(l),e.appendChild(a)}else e.remove();else console.warn("#product-sets does not exist, product-sets cannot be added.")},e.prototype.build_similar_products=function(t){var e=document.getElementById("similar-products");if(e)if(t.length)for(var n=0;n<t.length;n++){var o="/products/"+t[n].product_id,r=t[n].name,i=t[n].showcase_image,s=t[n].price,a=document.createElement("A");a.setAttribute("class","similar-product related-product"),a.setAttribute("href",o);var u=document.createElement("IMG");u.setAttribute("class","similar-product__img related-product__img"),u.setAttribute("src",i),u.setAttribute("alt","Image of a product of which this product is a set. ("+r+"}");var c=document.createElement("SPAN");c.setAttribute("class","similar-product__name related-product__name"),c.textContent=r;var l=document.createElement("SPAN");l.setAttribute("class","similar-product__price related-product__price"),l.textContent="£"+s,a.appendChild(u),a.appendChild(c),a.appendChild(l),e.appendChild(a)}else e.remove();else console.warn("#similar-products does not exist, similar-products cannot be added.")},e.prototype.build_features=function(t){var e=document.getElementById("product-features");if(e)for(var n=0;n<t.length;n++){var o=t[n].name,r=document.createElement("P");r.setAttribute("class","product-info__section__text"),r.textContent=o,e.appendChild(r)}else console.warn("#product-features does not exist, similar-products cannot be added.")},e.prototype.add_to_basket=function(){var e=this,n=document.getElementById("quantity-ctrl"),o=Number(n.getAttribute("product-id"));document.getElementById("add-to-basket-btn").addEventListener("click",(function(){var r=Number(n.value);Number.isInteger(r)?t.prototype.add_item.call(e,o,r):console.warn("Check the quantity, it is either NaN or a float. Must be a number")}))},e}(f),g=function(){function t(){if(this.userReviewForm=document.getElementById("product-user-review-form"),this.userReviewForm){var t=this.userReviewForm.querySelectorAll('[userSection="current-section"]'),e=this.userReviewForm.querySelectorAll('[userSection="update-section"]'),n=document.getElementsByClassName("product-reviews__review__confirm-delete")[0],o=this.userReviewForm.querySelector("#user-review-edit-start"),r=this.userReviewForm.querySelector("#user-review-edit-cancel"),i=this.userReviewForm.querySelector("#user-review-delete-start"),s=this.userReviewForm.querySelector("#user-review-submit"),a=this.userReviewForm.querySelector("#user-review-edit-submit"),u=this.userReviewForm.querySelector("#user-review-operation"),c=this.userReviewForm.querySelector("#user-review-delete-bool");this._build_update_comments_edit_btn(o,t,e),this._build_update_comments_cancel_btn(r,t,e),this._build_update_comments_submit_btn(a,s,u),this._build_delete_functions(i,u,n,c,s)}}return t.prototype._build_update_comments_edit_btn=function(t,e,n){t.addEventListener("click",(function(){for(var t=0;t<e.length;t++){e[t].classList.add("hide")}for(t=0;t<n.length;t++){n[t].classList.remove("hide")}}))},t.prototype._build_update_comments_cancel_btn=function(t,e,n){t.addEventListener("click",(function(){for(var t=0;t<e.length;t++){e[t].classList.remove("hide")}for(t=0;t<n.length;t++){n[t].classList.add("hide")}}))},t.prototype._build_delete_functions=function(t,e,n,o,r){var i;t.addEventListener("click",(function(t){n.classList.remove("hide"),t.stopPropagation()})),document.body.addEventListener("click",(function(){n.classList.add("hide")})),null===(i=n.querySelector(".confirm-delete__inner-container"))||void 0===i||i.addEventListener("click",(function(t){t.stopPropagation()})),n.querySelector('.confirm-delete__btn[for="cancel"]').addEventListener("click",(function(){n.classList.add("hide")})),n.querySelector('.confirm-delete__btn[for="delete"]').addEventListener("click",(function(){e.value="delete",o.value="true",r.click()}))},t.prototype._build_update_comments_submit_btn=function(t,e,n){t.addEventListener("click",(function(){n.value="update",e.click()}))},t}(),y=function(){function t(){}return t.thousand_separated_2dp=function(t){return Number(t).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")},t.thousand_sep_to_float=function(t){return t?Number(t.replace(",","")):0},t}(),w=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),E=function(t){function e(){var e=t.call(this)||this;if(e.summaryItemsParent=document.getElementById("basket-summary-data"),e.basketItems=[],null!=e.items&&"{}"!=e.items){for(var n in JSON.parse(e.items))e.basketItems.push(n);var o=e.basketItems.join(","),r=window.location.href.replace(/basket.*/,"basket-info-API/?pks="+o),i=new XMLHttpRequest;i.open("GET",r),i.send(),i.onreadystatechange=function(){if(4==i.readyState&&200==i.status){var t=JSON.parse(i.responseText);t.productsInfo&&(e.build_basket_summary(t.productsInfo),e.update_basket_totals())}}}return e}return w(e,t),e.prototype.build_basket_summary=function(t){for(var e=this,n=window.location.href.replace(/basket.*/,"products/"),o=function(o){var i=t[o],s=Number(JSON.parse(r.items)[i.productId]),u=document.createElement("div"),c=document.createElement("div"),l=document.createElement("div"),d=document.createElement("div");u.className="basket-summary__row",u.setAttribute("product-id",i.productId),c.className="basket-summary__row__container basket-summary__row__container--img",l.className="basket-summary__row__container",d.className="basket-summary__row__container",c.setAttribute("contents","product-img"),l.setAttribute("contents","product-info"),d.setAttribute("contents","product-price");var m=document.createElement("a");m.className="basket-summary__row__data",m.href=n+i.productId,m.setAttribute("field","product-image");var p=document.createElement("img");p.src=i.image,p.alt="Image of "+i.productName,m.appendChild(p);var _=document.createElement("a");_.className="basket-summary__row__data text-link",_.href=n+i.productId,_.setAttribute("field","product-name"),_.textContent=i.productName;var h=document.createElement("a");h.className="basket-summary__row__data text-link",h.href="/stores/"+i.storeId,h.setAttribute("field","product-store"),h.textContent=i.storeName;var f=document.createElement("P");f.className="basket-summary__row__data",f.setAttribute("field","product-colour"),f.textContent=i.colourName;var v=document.createElement("DIV");v.className="c-quantity basket-summary__row__function",v.id="product-"+i.productId,v.setAttribute("field","quantity");var b=document.createElement("INPUT");b.className="c-quantity__input",b.min="0",b.step="1",b.max=i.inventory,b.value=s.toString(),b.type="number",b.addEventListener("focusout",(function(t){if(t.stopPropagation(),console.log(b.value),a.check_if_positive_int(Number(b.value))){var n=Number(b.value);n>Number(b.max)&&(b.value=b.max,n=Number(b.max)),e.update_single_item(i.productId,n),N.textContent=(n*i.price).toString(),e.update_basket_totals()}}));var g=document.createElement("button");g.className="c-quantity__btn",g.setAttribute("control","quantity-down"),g.addEventListener("click",(function(t){t.stopPropagation(),e.remove_an_item(i.productId,i.price,N),e.update_basket_totals()}));var w=document.createElement("button");w.className="c-quantity__btn",w.setAttribute("control","quantity-up"),w.addEventListener("click",(function(t){t.stopPropagation(),e.add_an_item(i.productId,i.price,N),e.update_basket_totals()}));var E=document.createElement("SPAN");E.className="c-quantity__btn__text",E.textContent="-";var A=document.createElement("SPAN");A.className="c-quantity__btn__text",A.textContent="+",g.appendChild(E),w.appendChild(A),v.appendChild(g),v.appendChild(b),v.appendChild(w);var k=document.createElement("P");k.className="basket-summary__row__data",k.setAttribute("field","product-price-container");var I=document.createElement("span");I.textContent="£",I.setAttribute("field","product-price-currency"),k.appendChild(I);var N=document.createElement("span");N.setAttribute("field","product-price-value"),N.textContent=y.thousand_separated_2dp(Number(i.price)*s),k.appendChild(N);var C=document.createElement("SPAN");C.className="basket__icon",C.setAttribute("field","remove-item"),C.addEventListener("click",(function(t){t.stopPropagation(),e.remove_whole_item(i.productId,u),e.update_basket_totals()}));var S=document.createElement("I");S.className="fa fa-times",C.appendChild(S),k.appendChild(C),c.appendChild(m),l.appendChild(_),l.appendChild(h),l.appendChild(f),l.appendChild(v),d.appendChild(k),u.appendChild(c),u.appendChild(l),u.appendChild(d),r.summaryItemsParent.appendChild(u)},r=this,i=0;i<t.length;i++)o(i);new u},e.prototype.update_basket_totals=function(){for(var t=document.getElementById("basket-subtotal").children[1],e=document.getElementById("basket-vat").children[1],n=document.getElementById("basket-total").children[1],o=0,r=document.getElementById("basket-summary-data").querySelectorAll('[field="product-price-value"]'),i=0;i<r.length;i++)o+=y.thousand_sep_to_float(r[i].textContent);var s=o/1.2,a=o-s;t.textContent=s.toFixed(2),e.textContent=a.toFixed(2),n.textContent=y.thousand_separated_2dp(o)},e.prototype.remove_an_item=function(t,e,n){this.remove_item(Number(t),1),n.textContent=y.thousand_separated_2dp(y.thousand_sep_to_float(n.textContent)-Number(e))},e.prototype.add_an_item=function(t,e,n){this.add_item(Number(t),1),n.textContent=y.thousand_separated_2dp(y.thousand_sep_to_float(n.textContent)+Number(e))},e.prototype.remove_whole_item=function(t,e){this.remove_entire_item(t),e.remove()},e}(f);new i,new f,new s,new l,new m;var A=window.location.href;-1!=A.search(/\/products\/[0-9]{1,}/)?(new b,new u,new p,_.getInstance(),new g):A.includes("/basket/")?new E:A.includes("user/register")||A.includes("user/change-password")?new d:A.includes("/order-history/")?(new h,_.getInstance()):A.includes("/products/reviews/")&&(_.getInstance(),new g)}]);